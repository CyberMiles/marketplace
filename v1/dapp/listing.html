<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.86, shrink-to-fit=no,user-scalable=no">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/open-iconic/1.1.1/font/css/open-iconic-bootstrap.css">
    <title>Buy</title>
</head>

<body>
<div class="container" style="display:none" id="info-panel">
    <div>
        <p id="image-img"></p>
        <h3 id="title-div">... ...</h3>
    </div>
    <div>
        <p id="price-desc"></p>
    </div>

    <div>
    <p>Description:</p>
    <div id="desc-panel">
    </div>
    </div>

    <dl class="row" style="margin-top: 20px;">
        <dt class="col-sm-3">Seller</dt>
        <dd class="col-sm-9" id="creator">... ...</dd>
        <dt class="col-sm-3">Escrow time (s)</dt>
        <dd class="col-sm-9" id="escrow">... ...</dd>
    </dl>
    <hr/>
</div>
<div class="container d-buyer d-seller d-escrow d-escrow-going d-escrow-done d-disputing d-closed d-closed-resolve-disputed d-closed-sold d-closed-buyer d-closed-refund-disputed d-closed-refund-direct d-none">
    <p>Buyer Info:</p>
    <p class="buyer-info">

    </p>
</div>
<div class="container d-other d-buyer d-open d-none" id="buy-panel">
    <h3>Buy</h3>
    <form>
        <div class="form-row">
            <input type="text" id="name-field" class="form-control" placeholder="Your name">
        </div>
        <div class="form-row">
            <div class="form-group" style="padding-left: 0px;">
                <label> How do you pay? </label>
                <a href="">recharge SMC with credit card</a>

                <select id="prices-select" class="form-control">
                </select>
            </div>
        </div>
        <div class="form-row">
            <label style="margin-top: 4px; margin-bottom: 2px; margin-left: 4px;">How do the seller get in touch to arrange delivery?</label>
        </div>
        <div class="form-row">
            <div class="form-group col" style="padding-left: 0px;">
                <select id="contact-app-field" class="form-control">
                    <option data-translate="telegram">Telegram</option>
                    <option data-translate="twitter">Twitter</option>
                    <option data-translate="facebook">Facebook</option>
                    <option data-translate="wechat">WeChat</option>
                    <option data-translate="phone">Phone</option>
                    <option data-translate="email" selected>Email</option>
                </select>
            </div>
            <div class="form-group col" style="padding-right: 0px;">
                <input type="text" id="contact-id-field" class="form-control" data-translate="ur_addr" placeholder="Your Email, Your Facebook ID, etc">
            </div>
        </div>
        <div class="form-row">
            <textarea class="form-control" id="mesg-field" rows="2" placeholder="Leave a message"></textarea>
        </div>
    </form>

    <div>
        <button id="buy-submit" class="btn btn-primary" onclick="buy()">Buy</button>
    </div>
</div>

<div class="container d-buyer d-escrow d-escrow-going d-none" id="update-buyer-panel">
    <p>Update Buyer Info:</p>
    <div class="form-row">
        <input type="text" id="update-name-field" class="form-control" placeholder="Your name">
    </div>
    <div class="form-row">
        <div class="form-group col" style="padding-left: 0px;">
            <select id="update-contact-app-field" class="form-control">
                <option data-translate="telegram">Telegram</option>
                <option data-translate="twitter">Twitter</option>
                <option data-translate="facebook">Facebook</option>
                <option data-translate="wechat">WeChat</option>
                <option data-translate="phone">Phone</option>
                <option data-translate="email" selected>Email</option>
            </select>
        </div>
        <div class="form-group col" style="padding-right: 0px;">
            <input type="text" id="update-contact-id-field" class="form-control" data-translate="ur_addr" placeholder="Your Email, Your Facebook ID, etc">
        </div>
    </div>
    <div class="form-row">
        <textarea class="form-control" id="update-mesg-field" rows="2" placeholder="Leave a message"></textarea>
    </div>
    <div>
        <button id="buy-submit" class="btn btn-primary" onclick="updateBuyerInfo()">Update</button>
    </div>

</div>

<div class="container d-buyer d-seller d-escrow d-escrow-going d-disputing d-none" id="seller-mesg-text">
    <p>Seller Mesg:</p>
    <p class="seller-mesg"></p>
</div>

<div id="seller-mesg-panel" class="container d-seller d-escrow d-escrow-going d-disputing d-none">
    <form>
        <div class="form-row">
            <textarea class="form-control" id="seller-mesg-field" rows="2" placeholder="Leave a message to buyer."></textarea>
        </div>
    </form>
    <div>
        <button id="send-mesg-submit" class="btn btn-primary" onclick="setSellerMesg($('#seller-mesg-field').val())">Push</button>
    </div>
</div>

<div class="container " id="dispute-panel">
    <div>
        <button id="close-dispute-submit" class="btn btn-primary d-buyer d-escrow d-escrow-going d-none"  onclick="closeByBuyer()">I received it</button>
        <button id="dispute-submit" class="btn btn-primary d-buyer d-escrow d-escrow-going d-none" onclick="dispute()">I want to dispute it</button>
    </div>
</div>

<div class="container d-buyer d-disputing d-none" id="resolve-panel">   
    <div>
        <p>You have disputed. The fund will be in the contract unless the dispute is solved. If the dispute has been resolved offline, you can click the following button, then the fund will be transfered to the seller.</p>
    </div>
    <div>
        <button id="resolve-submit" class="btn btn-primary d-buyer d-disputing" onclick="resolve()">The dispute is resolved</button>
    </div>
</div>
<div class="container d-buyer d-closed-buyer d-closed-refund-disputed d-none">
    <div>
        <p>You have disputed. And the seller has refunded.</p>
    </div>
</div>

<div class="container d-seller d-closed-buyer d-closed-refund-disputed d-none">
    <div>
        <p>The buyer has disputed. And you refunded.</p>
    </div>
</div>

<div class="container d-seller d-open d-none">
    <div class="alert alert-secondary text d-seller d-open" role="alert">
        This product is listing and no one bought yet
    </div>
</div>

<div class="container d-other d-unlisting d-none">
    <div class="alert alert-secondary text" role="alert">
        This product is unsold temporarily.
    </div>
</div>

<div class="container d-seller d-unlisting d-none">
    <div class="alert alert-secondary text d-other d-unlisting" role="alert">
        This product is unlisting now.
    </div>
</div>

<div class="container d-other d-escrow d-escrow-going d-escrow-done d-none">
    <div class="alert alert-secondary text d-escrow" role="alert">
        This product is no longer available.
    </div>
</div>

<div class="container d-seller d-escrow d-escrow-going d-none">
    <div class="alert alert-secondary text d-escrow" role="alert">
        This product has been bought. The fund is now in the contract.
    </div>
</div>
<div class="container d-seller d-escrow d-escrow-done d-none">
    <div class="alert alert-secondary text d-escrow" role="alert">
        This escrow time is up. Now you can click the receive fund to fetch the fund from the contract.
    </div>
</div>
<div class="container d-buyer d-escrow d-escrow-going d-none">
    <div class="alert alert-secondary text d-escrow" role="alert">
        You have paid for it. The fund is now in the contract. If you want to dispute, please do it within the escrow time. Thanks.
    </div>
</div>
<div class="container d-buyer d-escrow d-escrow-done d-none">
    <div class="alert alert-secondary text d-escrow" role="alert">
        The escrow time is up. Now the seller can fetch fund from the contract. Thanks. 
    </div>
</div>
<div class="container d-other d-closed d-closed-resolved d-closed-sold d-none">
    <div class="alert alert-secondary text" role="alert">
        This product has been sold.
    </div>
</div>
<div class="container d-buyer d-closed d-closed-sold d-none">
    <div class="alert alert-secondary text" role="alert">
        You have successfully paid for this product.
    </div>
</div>
<div class="container d-buyer d-closed d-closed-resolved d-none">
    <div class="alert alert-secondary text" role="alert">
        Your dispute has been successfully resolved. You wins.
    </div>
</div>
<div class="container d-seller d-closed d-closed-sold d-none">
    <div class="alert alert-secondary text" role="alert">
        You have received the fund for this product.
    </div>
</div>
<div class="container d-seller d-other d-closed d-closed-resolve-disputed d-none">
    <div class="alert alert-secondary text" role="alert">
        The buyer raised the dispute and then resolved the dispute.
    </div>
</div>
<div class="container d-buyer d-other d-closed d-closed-resolve-disputed d-none">
    <div class="alert alert-secondary text" role="alert">
       You have raised the dispute and then resolved the dispute.
    </div>
</div>
<div class="container d-seller d-closed-buyer d-closed-refund-direct d-none">
    <div class="alert alert-secondary text" role="alert">
        You have refunded to the buyer. The refunded reason is:
        <p class="refunded-reason"></p>
    </div>
</div>

<div class="container d-buyer d-other d-closed-buyer d-closed-refund-direct d-none">
    <div class="alert alert-secondary text" role="alert">
        You have been refunded by the buyer. The refunded reason is:
        <p class="refunded-reason"></p>
    </div>
</div>
<div class="container" id="seller-panel">
    <div class="container d-seller d-disputing d-none">
        <p>The buyer have disputed. The fund will be in the contract unless the dispute is solved. You can click the refund button to transfer fund back to the user.</p>
    </div>
    <hr/>
    <div class="do-edit d-seller d-open d-unlisting d-none">
        <button id="addImage-link" class="btn btn-info" onclick="addImage()">Add product image</button>
        <button id="setPrice-link" class="btn btn-info" onclick="setPrice()">Add or update price</button>
       
    </div>
    <div class="do-unlist d-seller d-open d-none">
        <button id="unlist-product" class="btn btn-primary" onclick="unlist()">Unlist product</button>
    </div>
    <div class="do-relist d-seller d-unlisting d-none">
        <button id="relist-product" class="btn btn-primary" onclick="relist()">Relist product</button>        
    </div>
    <div class="do-refund d-seller d-escrow d-escrow-going d-disputing d-none">
         <button id="refund-submit" class="btn btn-primary " onclick="refund()">Refund buyer</button>
    </div>
    <div class="d-seller d-escrow d-escrow-done d-none">
        <button id="close-refund-submit" class="btn btn-primary" onclick="closeBySeller()">Receive fund</button>
    </div>
</div>

</body>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="js/listing.js"></script>
</html>
